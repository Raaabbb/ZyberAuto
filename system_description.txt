AUTO SERVICE MANAGEMENT SYSTEM — DETAILED DESCRIPTION
Generated: January 29, 2026

1) OVERVIEW
This system is a web-based Auto Service / Garage Management platform designed to manage customer service bookings, customer information, complaints (inquiries), inventory items, and management reports. It provides two primary portals:
- Customer Portal for self-service booking and complaint handling.
- Secretary Portal for back-office management (requests, scheduling, reports, inventory, and complaint replies).

The system uses PHP with server-side sessions for authentication and a MySQL database accessed via PDO. The UI is primarily built with Tailwind CSS and uses client-side JavaScript for dynamic interactions.

2) CORE PURPOSE
The system’s purpose is to:
- Allow customers to request service bookings and track their status.
- Allow office staff (secretary role) to accept/reject bookings, handle walk-in customers, and manage appointments.
- Provide a mechanism for customers to file complaints and for staff to respond.
- Track inventory items required for service operations.
- Provide basic business intelligence reporting on revenue and service efficiency.

It is NOT a full enterprise automotive ERP; it focuses on appointment/service request management, customer communication, and light inventory/reporting.

3) USER ROLES AND ACCESS
3.1 Customer Role
- Can log in and access customer-specific pages only.
- Can create service booking requests, view their bookings, and see booking status updates.
- Can file complaints and review replies from staff.
- Can update their account profile (name, phone, email) and change password.

3.2 Secretary Role
- Can access the secretary portal with full management views:
  - Dashboard metrics
  - Booking request queue
  - Appointment scheduling
  - Customer list
  - Complaints (inquiries) management and replies
  - Inventory management
  - Reports

3.3 Admin Role (Limited/Placeholder)
- Login logic references an admin role and admin dashboard redirect, but no admin dashboard is included in this workspace. The admin role is effectively not implemented here.

4) AUTHENTICATION AND ACCOUNT MANAGEMENT
4.1 Login
- Login is handled by server-side validation of the user table.
- Passwords are stored hashed and verified using `password_verify`.
- After login, sessions store `user_id`, `username`, and `role`.

4.2 Registration
- Registration allows creating a user record with a username and password.
- Role assignment is based on username content:
  - If username contains the string “secretary”, the role is set to secretary.
  - Otherwise, role is set to customer.

4.3 Forced Password Change
- If a customer logs in using the default password “12345678”, the system forces a password change before allowing portal access.
- Password rules: at least 8 characters, cannot reuse the default.

4.4 Logout
- Logout shows a confirmation screen and then destroys the session.

5) CUSTOMER PORTAL FEATURES
5.1 My Bookings (customer_booking.php)
- Displays a list of bookings associated with the logged-in customer.
- Bookings include:
  - Order number
  - Vehicle details (make/model and plate where available)
  - Service name
  - Status (Pending, Accepted, Rejected)
  - Bill/total amount
  - Date and time slot
- Status mapping:
  - “In Progress” is displayed as “Accepted”.
  - “Waiting on Parts” is displayed as “Rejected”.
- Rejection reason can be displayed if stored in booking metadata.

5.2 Create New Booking (customer_new_booking.php, submit_booking.php)
- Customers submit vehicle and service information:
  - Vehicle brand/type and plate
  - Service type
  - Preferred date and time slot
  - Notes
- Submissions are stored in:
  - `vehicles` table
  - `service_orderss` table
  - `dashboard` table (as the summary record used for lists)

5.3 Booking Confirmation (customer_new_bookingconfirm.php)
- Displays a confirmation screen with a generated booking ID and summary.
- Uses browser LocalStorage to populate some confirmation details.

5.4 Complaint Filing (customer_filecomplaints.php, submit_complaint.php)
- Customers can submit complaints with a subject and detailed message.
- Complaints are stored in the `complaints` table with status “New”.

5.5 Complaint History (customer_view_complaints.php)
- Customers can view submitted complaints, replies, and timestamps.

5.6 Settings (customer_settings.php)
- Customers can update:
  - Full name (also updates login username)
  - Phone number
  - Email address
- The system updates the `user` table and attempts to update the `customers` table based on name matching.

6) SECRETARY PORTAL FEATURES
6.1 Dashboard (secretary_dashboard.php)
- KPI widgets:
  - Today’s appointments (Pending/In Progress)
  - Total customers
  - Total revenue (In Progress/Completed)
  - New complaints count
  - Year-to-date revenue
- Monthly revenue chart (current year), based on `dashboard` table.

6.2 Booking Requests (secretary_bookingrequest.php)
- Shows all booking requests with search and status filters.
- Staff can:
  - Accept requests (status “In Progress”)
  - Reject requests (status “Waiting on Parts” with reason)
- Rejection reasons are appended to `vehicle_info` for later customer display.

6.3 Booking Request Details (secretary_bookingdetails.php)
- Provides a detailed view and action controls for a booking request.

6.4 Appointment Scheduling (secretary_appointment.php)
- Secretary can schedule new appointments (including selecting a customer).

6.5 Walk-in Submission (secretary_submit_walkin.php)
- Supports on-the-spot customer and vehicle creation.
- Automatically sets booking status to “In Progress”.

6.6 Customer Management (secretary_customer.php)
- Lists customer records and provides management access (UI-driven).

6.7 Inquiries / Complaints (secretary_inquiries.php, get_complaints.php, update_complaint_reply.php)
- Displays all complaints from customers.
- Secretary can open a complaint, view details, and submit a reply.
- Reply updates complaint status to “Replied” with reply timestamp.

6.8 Inventory Management (secretary_inventory.php, get_inventory.php, save_inventory_item.php, delete_inventory_item.php)
- View inventory items with name, category, and quantity.
- Add, update, and delete inventory items.

6.9 Reports (secretary_reports.php)
- Revenue analysis and efficiency metrics.
- Transaction list derived from the `dashboard` table.
- Print and PDF download support via html2pdf.

7) DATA STORAGE AND STRUCTURE
Database access is centralized in db.php using PDO. The system relies on several tables, including (as used in code):
- user: stores user accounts (username, password, role)
- customers: stores customer contact details
- vehicles: stores vehicle records
- service_orderss: tracks active service orders
- dashboard: summary of service bookings and financial data
- complaints: customer complaint records and replies
- inventory: parts/items inventory

8) WHAT THE SYSTEM CAN DO
- Provide role-based access for customers and secretaries.
- Accept and track service booking requests.
- Store vehicle and service details per booking.
- Allow staff to accept or reject bookings with reasons.
- Provide an appointment scheduling interface.
- Accept walk-in service entries.
- Allow customers to file complaints and see replies.
- Provide staff tools to respond to complaints.
- Manage basic inventory records.
- Generate revenue and efficiency reports with printable/PDF output.

9) WHAT THE SYSTEM CANNOT DO (CURRENT LIMITATIONS)
- No working password reset flow: forgot_password.html is a static form without backend processing.
- No payment processing, invoicing, or online checkout.
- No email/SMS notifications or automated reminders.
- No real-time updates or WebSocket-based live data refresh.
- No mechanic/technician assignment or job tracking workflow.
- No parts ordering or supplier integration.
- No attachments or file uploads for complaints or booking records.
- Booking updates from customers are not persisted to the database (update_booking.php is currently a frontend-only pattern).
- No full admin portal implementation despite a placeholder admin role in login logic.
- Inventory endpoints have limited access control (some endpoints do not enforce role checks).
- No explicit service catalog or pricing rules engine.
- No multi-branch support or location-based scheduling.
- No audit log for critical actions.

10) SECURITY AND ACCESS NOTES
- Sessions are used for authentication and role checks on most pages.
- Many server endpoints enforce role checks, but a few data endpoints (e.g., inventory list/save) do not explicitly restrict access.
- No CSRF tokens are present for form submissions.
- No two-factor authentication is implemented.

11) TECHNOLOGY SUMMARY
- Deployment target includes local XAMPP and a hosted environment (as defined in db.php).
- Report export supports print and PDF output.

12) INTENDED WORKFLOW SUMMARY
- Customer registers → logs in → creates booking → monitors status.
- Secretary reviews booking requests → accepts/rejects → tracks in dashboard.
- Customer files complaints → secretary responds → customer views reply.
- Secretary manages inventory and prints business reports.

13) DETAILED UI FLOW
This section outlines what the user sees and does at each major screen, and how the UI navigates between screens.

13.1 Entry and Authentication Flow
1. Landing / Login (index.html)
  - Two‑panel layout (branding on left, login on right).
  - User enters username and password and clicks “Sign In”.
  - Password visibility toggle available.
  - “Register here” link routes to registration (reg.php).
  - On submit, the form posts to login.php for authentication and role routing.

2. Authentication Result (login.php)
  - Shows a modal-style status card (success or error).
  - Displays a loading spinner and auto‑redirects:
    - Customer → customer_booking.php (or change_password.php if default password detected)
    - Secretary → secretary_dashboard.php
    - Admin → admin_dashboard.php (not implemented)

3. Registration (reg.php)
  - Similar two‑panel layout and styling.
  - User enters username, password, confirm password.
  - Client-side validation ensures passwords match.
  - On success, user is redirected to login.

4. Forced Password Change (change_password.php)
  - Triggered if customer logged in with default password.
  - User must set a new password before continuing.
  - On success, redirects to customer_booking.php.

5. Logout (logout.php)
  - Confirmation card with “Yes, Log Out” and “Cancel”.
  - Confirmed logout clears session and returns to login.

13.2 Customer Portal UI Flow
All customer screens share a consistent layout:
- Top header bar with “Customer Portal” title and user initials.
- Left sidebar with navigation: My Bookings, My Complaints, File a Complaint, Settings, Log Out.

1. My Bookings (customer_booking.php)
  - Main page after customer login.
  - Displays list/table of bookings with status tags and bill amounts.
  - “NEW BOOKING” button at top right routes to customer_new_booking.php.
  - Each booking can open a detail card (frontend interaction).
  - Status badges visually indicate Pending/Accepted/Rejected.

2. New Booking (customer_new_booking.php)
  - Form sections:
    - Vehicle Information (brand, model/type, plate)
    - Service Details (service selection)
    - Preferred Schedule (date/time)
    - Notes
  - “Submit” triggers AJAX POST to submit_booking.php.
  - On success, routes to confirmation page.

3. Booking Confirmation (customer_new_bookingconfirm.php)
  - Shows booking summary:
    - Confirmation number (generated)
    - Date submitted
    - Vehicle details
    - Services requested
  - “Back to My Bookings” returns to customer_booking.php.

4. File a Complaint (customer_filecomplaints.php)
  - Form for complaint subject and detailed message.
  - Submit uses a modal confirmation dialog.
  - On confirm, sends request to submit_complaint.php and shows a success dialog.

5. My Complaints (customer_view_complaints.php)
  - Displays customer’s complaints list with:
    - Subject
    - Status (New/Replied)
    - Submitted and replied timestamps
    - Staff reply content

6. Settings (customer_settings.php)
  - Personal details form for name, phone, email.
  - Saving updates database and session username.
  - Includes link to change password.

13.3 Secretary Portal UI Flow
All secretary screens share a consistent layout:
- Left sidebar with modules: Dashboard, Appointments, Customer, Booking Request, Inquiries, Report, Inventory, Log Out.
- Main content area with module‑specific tables, cards, and actions.

1. Dashboard (secretary_dashboard.php)
  - KPI cards (today’s appointments, customers, revenue, complaints).
  - Monthly revenue line/area chart.
  - Primary navigation hub for secretary tasks.

2. Booking Requests (secretary_bookingrequest.php)
  - Search bar and filter chips (All, Pending, Approved, Rejected).
  - Table shows customer, vehicle, service, schedule, and status.
  - Each row offers action buttons:
    - Accept → updates status to “In Progress”.
    - Reject → opens modal to enter rejection reason, then updates status to “Waiting on Parts”.
  - Notifications appear as toast messages.

3. Booking Request Details (secretary_bookingdetails.php)
  - Detailed view of a single booking request.
  - “Accept Request” and “Decline Request” action buttons.
  - Used for more focused decision‑making than the list view.

4. Appointments (secretary_appointment.php)
  - Form to schedule an appointment for a chosen customer.
  - Pulls customer list from database for selection.

5. Walk‑in Submission (secretary_submit_walkin.php)
  - UI form for walk‑in customer details and service.
  - Submitting creates customer, vehicle, and service order records.

6. Customer Management (secretary_customer.php)
  - Shows customer list and profile data.
  - Provides entry points to other modules from the sidebar.

7. Inquiries / Complaints (secretary_inquiries.php)
  - Searchable table of incoming complaints.
  - Clicking a row opens a modal with full complaint details.
  - Reply textarea allows staff response.
  - “Send Reply” updates complaint status to “Replied”.

8. Inventory (secretary_inventory.php)
  - Table listing inventory items and quantities.
  - Add/Edit item form in‑page (client‑side).
  - Delete action removes items from the database.

9. Reports (secretary_reports.php)
  - Select “Revenue Analysis” card to generate report view.
  - Report overlay shows totals and transaction breakdown.
  - Buttons for print and PDF download.

13.4 Navigation and UI Behavior Notes
- Most pages rely on session checks and redirect to index.html if not authenticated.
- UI uses modal dialogs for confirmations, replies, and alerts.
- Toast notifications are used for quick feedback on actions.
- Search and filters are client‑side for immediate UI responsiveness.

END OF DESCRIPTION
